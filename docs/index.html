<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Client Library for CloudOS • cloudos</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="R Client Library for CloudOS">
<meta property="og:description" content="The CloudOS client library for R makes it easy to interact with 
    CloudOS &lt;https://cloudos.lifebit.ai/&gt; in the R environment for analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cloudos</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lifebit-ai/cloudos/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="cloudos-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#cloudos-" class="anchor"></a>cloudos <img src="reference/figures/logo/hexlogo.png" align="right" height="140/">
</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

<p><strong>cloudos</strong> R package makes it easy to interact with Lifebit’s CloudOS <a href="https://cloudos.lifebit.ai/" class="uri">https://cloudos.lifebit.ai/</a> platform in the R environment.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the released version of <strong>cloudos</strong> from <a href="https://github.com/lifebit-ai/cloudos/">GitHub</a> at this moment. (Will be listed on <a href="https://CRAN.R-project.org">CRAN</a> as well)</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> <span class="op">}</span>
  <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"lifebit-ai/cloudos"</span><span class="op">)</span></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Bellow are given the demonstration of how the <strong>cloudos</strong> package can be used.</p>
<div id="load-the-library" class="section level3">
<h3 class="hasAnchor">
<a href="#load-the-library" class="anchor"></a>Load the library</h3>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifebit-ai/cloudos">cloudos</a></span><span class="op">)</span></pre></div>
</div>
<div id="setup-login-details" class="section level3">
<h3 class="hasAnchor">
<a href="#setup-login-details" class="anchor"></a>Setup login details</h3>
<p>To interact with the cloudos server, it require few login details.</p>
<p>Note: If no <code>base_url</code> given the default is <a href="https://cloudos.lifebit.ai/" class="uri">https://cloudos.lifebit.ai/</a></p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="va">cb_base_url</span> <span class="op">&lt;-</span> <span class="st">"http://cohort-browser-766010452.eu-west-1.elb.amazonaws.com"</span>
<span class="va">my_auth</span> <span class="op">&lt;-</span> <span class="st">"your_apikey"</span>
<span class="va">my_team_id</span> <span class="op">&lt;-</span> <span class="st">"your_team_id"</span>
<span class="co"># OR from environment variable stored in a ~/.Renviron file</span>
<span class="va">my_auth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"test_cloudos_apikey"</span><span class="op">)</span>
<span class="va">my_team_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"test_cloudos_team_id"</span><span class="op">)</span></pre></div>
</div>
<div id="connect-to-cloudos" class="section level3">
<h3 class="hasAnchor">
<a href="#connect-to-cloudos" class="anchor"></a>Connect to CloudOS</h3>
<p>Lets create a cloudos object with the login details, which can help us connect to cloudos server.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="va">my_cloudos</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/connect_cloudos.html">connect_cloudos</a></span><span class="op">(</span>base_url <span class="op">=</span> <span class="va">cb_base_url</span>,
                                       auth <span class="op">=</span> <span class="va">my_auth</span>,
                                       team_id <span class="op">=</span> <span class="va">my_team_id</span><span class="op">)</span>
<span class="va">my_cloudos</span>
<span class="co">#&gt; Base URL:  http://cohort-browser-766010452.eu-west-1.elb.amazonaws.com </span>
<span class="co">#&gt; Authentication Method:  API Key </span>
<span class="co">#&gt; Team ID: 5f046bf6c132dd15fdd1a525</span></pre></div>
</div>
</div>
<div id="application---cohort-browser" class="section level2">
<h2 class="hasAnchor">
<a href="#application---cohort-browser" class="anchor"></a>Application - Cohort Browser</h2>
<p>Cohort Browser is part of Lifebit’s cloudos offering. Lets explore how to interact with this in R environment.</p>
<div id="list-cohorts" class="section level3">
<h3 class="hasAnchor">
<a href="#list-cohorts" class="anchor"></a>List Cohorts</h3>
<p>To check list of available cohorts in a workspace.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_list_cohorts.html">cb_list_cohorts</a></span><span class="op">(</span><span class="va">my_cloudos</span><span class="op">)</span>
<span class="co">#&gt; Total number of cohorts found-57. But here is 10. For more, change 'page_number' and 'page_size'</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cohorts</span>,<span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;                         id                name</span>
<span class="co">#&gt; 1 5f73456e79721e542d5bea37 Cohort-R-to-compare</span>
<span class="co">#&gt; 2 5f68c6a0e95ca00b6918a2e9            Cohort-R</span>
<span class="co">#&gt; 3 5f6228133097cc7a6504fb76       cohort-test-2</span>
<span class="co">#&gt; 4 5f6227f285aae86f12fa9af9  test-cohort0-r-lib</span>
<span class="co">#&gt; 5 5f60a9b1cecd166285ffd8a7           dsadasdas</span>
<span class="co">#&gt;                                           description number_of_participants</span>
<span class="co">#&gt; 1                                                                     185674</span>
<span class="co">#&gt; 2 This cohort is for testing purpose, created from R.                 336107</span>
<span class="co">#&gt; 3                                For testing in R-lib                   4434</span>
<span class="co">#&gt; 4                                   For testing R-lib                 644686</span>
<span class="co">#&gt; 5                                                                     644686</span>
<span class="co">#&gt;   number_of_filters               created_at               updated_at</span>
<span class="co">#&gt; 1                 3 2020-09-29T14:32:14.048Z 2020-09-29T14:52:13.228Z</span>
<span class="co">#&gt; 2                 3 2020-09-21T15:28:32.659Z 2020-09-29T14:52:03.252Z</span>
<span class="co">#&gt; 3                 4 2020-09-16T14:58:27.928Z 2020-09-28T11:18:31.430Z</span>
<span class="co">#&gt; 4                 0 2020-09-16T14:57:54.643Z 2020-09-16T14:57:54.643Z</span>
<span class="co">#&gt; 5                 0 2020-09-15T11:46:57.334Z 2020-09-15T11:46:57.334Z</span></pre></div>
</div>
<div id="create-a-cohort" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-cohort" class="anchor"></a>Create a cohort</h3>
<p>To create a new cohort.</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_create_cohort.html">cb_create_cohort</a></span><span class="op">(</span><span class="va">my_cloudos</span>,
                                       cohort_name <span class="op">=</span> <span class="st">"Cohort-R"</span>,
                                       cohort_desc <span class="op">=</span> <span class="st">"This cohort is for testing purpose, created from R."</span><span class="op">)</span>
<span class="va">my_cohort</span></pre></div>
</div>
<div id="get-a-cohort" class="section level3">
<h3 class="hasAnchor">
<a href="#get-a-cohort" class="anchor"></a>Get a cohort</h3>
<p>Get a available cohort in to a cohort R object. This cohort object can be used in many different other functions.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_load_cohort.html">cb_load_cohort</a></span><span class="op">(</span>cloudos <span class="op">=</span> <span class="va">my_cloudos</span>, 
                                     cohort_id <span class="op">=</span> <span class="st">"5f6228133097cc7a6504fb76"</span><span class="op">)</span>
<span class="va">my_cohort</span>
<span class="co">#&gt; Cohort ID:  5f6228133097cc7a6504fb76 </span>
<span class="co">#&gt; Cohort Name:  cohort-test-2 </span>
<span class="co">#&gt; Cohort Description:  For testing in R-lib</span></pre></div>
</div>
<div id="get-samples-table" class="section level3">
<h3 class="hasAnchor">
<a href="#get-samples-table" class="anchor"></a>Get samples table</h3>
<p>Get all the samples (participants) table for a cohort with phenotypic filters applied.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="va">cohort_samples</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_get_samples_table.html">cb_get_samples_table</a></span><span class="op">(</span>cloudos <span class="op">=</span> <span class="va">my_cloudos</span>, 
                                                cohort <span class="op">=</span> <span class="va">my_cohort</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cohort_samples</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;         i               f20001i0a0 f31i0a0 f34i0a0   f52i0a0      f5984i0aavg</span>
<span class="co">#&gt; 1 1000184 non-melanoma skin cancer  Female    1957   January 62.5803571428571</span>
<span class="co">#&gt; 2 1001600      nasal cavity cancer  Female    1968 September 68.7105263157895</span>
<span class="co">#&gt; 3 1002915      nasal cavity cancer  Female    1950     March 58.8495575221239</span>
<span class="co">#&gt; 4 1004792       parathyroid cancer    Male    1959  November 66.7456140350877</span>
<span class="co">#&gt; 5 1008748           trachea cancer  Female    1959     April 61.3035714285714</span>
<span class="co">#&gt;   f5984i0amin f5984i0amax</span>
<span class="co">#&gt; 1           1         270</span>
<span class="co">#&gt; 2           1         270</span>
<span class="co">#&gt; 3           2         270</span>
<span class="co">#&gt; 4           2         270</span>
<span class="co">#&gt; 5           2         245</span></pre></div>
</div>
<div id="get-sample-filters-plot" class="section level3">
<h3 class="hasAnchor">
<a href="#get-sample-filters-plot" class="anchor"></a>Get sample filters plot</h3>
<p>Get ggplots for all the applied phenotypic filters for a cohort.</p>
<p>As this based on ggplot objects, this can be modified further.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="va">plot_list</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_plot_filters.html">cb_plot_filters</a></span><span class="op">(</span>cloudos <span class="op">=</span> <span class="va">my_cloudos</span>, cohort <span class="op">=</span> <span class="va">my_cohort</span><span class="op">)</span>
<span class="co">#&gt; Warning: Ignoring unknown parameters: binwidth, bins, pad</span>
<span class="co">#&gt; Warning: Continuous limits supplied to discrete scale.</span>
<span class="co">#&gt; Did you mean `limits = factor(...)` or `scale_*_continuous()`?</span>
<span class="co">#&gt; Warning: Ignoring unknown parameters: binwidth, bins, pad</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rpkgs.datanovia.com/ggpubr/">ggpubr</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: ggplot2</span>
<span class="fu">ggpubr</span><span class="fu">::</span><span class="fu"><a href="https://rpkgs.datanovia.com/ggpubr/reference/ggarrange.html">ggarrange</a></span><span class="op">(</span>plotlist <span class="op">=</span> <span class="va">plot_list</span><span class="op">)</span></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="100%"></p>
<p>Individual plots</p>
<div class="sourceCode" id="cb10"><pre class="downlit">
<span class="va">plot_list</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-10-1.png" width="100%"></p>
<div class="sourceCode" id="cb11"><pre class="downlit">
<span class="va">plot_list</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="100%"></p>
<p>Covert ggplot objects to plotly elements (just for demonstration purpose, in markdown plotly don’t support.)</p>
<div class="sourceCode" id="cb12"><pre class="downlit">
<span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">plot_list</span><span class="op">$</span><span class="va">filter_id_34</span><span class="op">)</span>
<span class="va">p1</span></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit">
<span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html">ggplotly</a></span><span class="op">(</span><span class="va">plot_list</span><span class="op">$</span><span class="va">filter_id_2345</span><span class="op">)</span>
<span class="va">p2</span></pre></div>
</div>
<div id="get-genotypic-table" class="section level3">
<h3 class="hasAnchor">
<a href="#get-genotypic-table" class="anchor"></a>Get genotypic table</h3>
<p>Get all the genotypic table for a cohort.</p>
<div class="sourceCode" id="cb14"><pre class="downlit">
<span class="co">#cohort_genotype &lt;- cloudos::cb_get_genotypic_table(my_cloudos, my_cohort)</span>
<span class="va">cohort_genotype</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_get_genotypic_table.html">cb_get_genotypic_table</a></span><span class="op">(</span>cloudos <span class="op">=</span> <span class="va">my_cloudos</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">cohort_genotype</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;   index Chromosome    Location Reference Alternative                Gene</span>
<span class="co">#&gt; 1    12          1 1:100011443         G           T AC118553.2; SLC35A3</span>
<span class="co">#&gt; 2     2          1 1:100007041         A           G AC118553.2; SLC35A3</span>
<span class="co">#&gt; 3     1          1 1:100007040         T           G AC118553.2; SLC35A3</span>
<span class="co">#&gt; 4    13          1 1:100015306         C           A AC118553.2; SLC35A3</span>
<span class="co">#&gt; 5    14          1 1:100015331         G           A AC118553.2; SLC35A3</span>
<span class="co">#&gt;           cn</span>
<span class="co">#&gt; 1 zzg_m_1_12</span>
<span class="co">#&gt; 2  zzg_m_1_2</span>
<span class="co">#&gt; 3  zzg_m_1_1</span>
<span class="co">#&gt; 4 zzg_m_1_13</span>
<span class="co">#&gt; 5 zzg_m_1_14</span></pre></div>
</div>
<div id="filtering" class="section level3">
<h3 class="hasAnchor">
<a href="#filtering" class="anchor"></a>Filtering</h3>
<div id="search-phenotypic-filters" class="section level4">
<h4 class="hasAnchor">
<a href="#search-phenotypic-filters" class="anchor"></a>Search phenotypic filters</h4>
<p>Search for phenotypic filters based on a term.</p>
<div class="sourceCode" id="cb15"><pre class="downlit">
<span class="va">all_filters</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_search_phenotypic_filters.html">cb_search_phenotypic_filters</a></span><span class="op">(</span>cloudos <span class="op">=</span> <span class="va">my_cloudos</span>, 
                                                     term <span class="op">=</span> <span class="st">"cancer"</span><span class="op">)</span>
<span class="co">#&gt; Total number of filters - 29</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">all_filters</span>, <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt;             categoryPathLevel1 categoryPathLevel2         categoryPathLevel3</span>
<span class="co">#&gt; 1 UK Biobank Assessment Centre        Touchscreen Health and medical history</span>
<span class="co">#&gt; 2 UK Biobank Assessment Centre        Touchscreen Health and medical history</span>
<span class="co">#&gt; 3 UK Biobank Assessment Centre        Touchscreen Health and medical history</span>
<span class="co">#&gt; 4 UK Biobank Assessment Centre        Touchscreen       Sex-specific factors</span>
<span class="co">#&gt; 5 UK Biobank Assessment Centre        Touchscreen       Sex-specific factors</span>
<span class="co">#&gt;        categoryPathLevel4   id</span>
<span class="co">#&gt; 1        Cancer screening 2345</span>
<span class="co">#&gt; 2        Cancer screening 2355</span>
<span class="co">#&gt; 3      Medical conditions 2453</span>
<span class="co">#&gt; 4 Female-specific factors 2674</span>
<span class="co">#&gt; 5 Female-specific factors 2684</span>
<span class="co">#&gt;                                                   name      type</span>
<span class="co">#&gt; 1                      Ever had bowel cancer screening      bars</span>
<span class="co">#&gt; 2                   Most recent bowel cancer screening histogram</span>
<span class="co">#&gt; 3                           Cancer diagnosed by doctor      bars</span>
<span class="co">#&gt; 4         Ever had breast cancer screening / mammogram      bars</span>
<span class="co">#&gt; 5 Years since last breast cancer screening / mammogram histogram</span>
<span class="co">#&gt;            valueType units instances array</span>
<span class="co">#&gt; 1 Categorical single               4     1</span>
<span class="co">#&gt; 2            Integer years         4     1</span>
<span class="co">#&gt; 3 Categorical single               4     1</span>
<span class="co">#&gt; 4 Categorical single               4     1</span>
<span class="co">#&gt; 5            Integer years         4     1</span>
<span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          description</span>
<span class="co">#&gt; 1 "ACE touchscreen question ""Have you ever had a screening test for bowel (colorectal) cancer? (Please include tests for blood in the stool/faeces or a colonoscopy or a sigmoidoscopy)"" If the participant activated the Help button they were shown the message:     Screening tests for bowel or colorectal cancer include:  - FOBT (faecal occult blood test) - this is when you    are given a set of cards and asked to smear a part    of your stool on three separate occasions onto the    cards and then return the cards to be tested for    blood.  - Sigmoidoscopy - a tube is used to examine the lower    bowel. This is usually done in a doctor's office    without pain relief.  - Colonoscopy - a long tube is used the examine the    whole large bowel; you would usually have to drink    a large amount of special liquid to prepare the    bowel; and you would be given a sedative medication    for the procedure.     "</span>
<span class="co">#&gt; 2                                                                                                                                                                                                                                                                                                                                                                          "ACE touchscreen question ""How many years ago was the most recent one of these tests?"" The following checks were performed:  If answer   If answer &gt; Participants age - 5 years then rejected  If answer &gt; 20 then participant asked to confirm   If the participant activated the Help button they were shown the message:     If you are unsure; please provide an estimate or select Do not know.      ~F2355~ was collected from participants who indicated they have had a screening test for bowel (colorectal) cancer; as indicated by their answers to ~F2345~"</span>
<span class="co">#&gt; 3                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      "ACE touchscreen question ""Has a doctor ever told you that you have had cancer?"" If the participant activated the Help button they were shown the message:     If you are unsure if you have been told you had cancer; select Do not know and you will be asked about this by an interviewer later during this visit.     "</span>
<span class="co">#&gt; 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       "ACE touchscreen question ""Have you ever been for breast cancer screening (a mammogram)?"""</span>
<span class="co">#&gt; 5                                                                                                                                                                                                                                                                                                                                                                                                                              "ACE touchscreen question ""How many years ago was your last screen?"" The following checks were performed:  If answer   If answer &gt; Participants age - 15 years then rejected  If answer &gt; 15 then participant asked to confirm   If the participant activated the Help button they were shown the message:     If you are unsure; please provide an estimate or select Do not know.      ~F2684~ was collected from women who indicated that they had been for a mammogram; as defined by their answers to ~F2674~"</span>
<span class="co">#&gt;   descriptionParticipantsNo descriptionItemNo descriptionStability coding</span>
<span class="co">#&gt; 1                    501599            572225             Complete 100349</span>
<span class="co">#&gt; 2                    180035            202611             Complete 100567</span>
<span class="co">#&gt; 3                    501592            572218             Complete 100603</span>
<span class="co">#&gt; 4                    272921            309271             Complete 100349</span>
<span class="co">#&gt; 5                    223188            252179             Complete 100567</span>
<span class="co">#&gt;   descriptionCategoryID descriptionItemType descriptionStrata descriptionSexed</span>
<span class="co">#&gt; 1                100040                Data           Primary           Unisex</span>
<span class="co">#&gt; 2                100040                Data           Primary           Unisex</span>
<span class="co">#&gt; 3                100044                Data           Primary           Unisex</span>
<span class="co">#&gt; 4                100069                Data           Primary           Female</span>
<span class="co">#&gt; 5                100069                Data           Primary           Female</span>
<span class="co">#&gt;                                                      link</span>
<span class="co">#&gt; 1 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2345</span>
<span class="co">#&gt; 2 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2355</span>
<span class="co">#&gt; 3 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2453</span>
<span class="co">#&gt; 4 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2674</span>
<span class="co">#&gt; 5 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2684</span>
<span class="co">#&gt;                                                                                 instance0Name</span>
<span class="co">#&gt; 1 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt; 2 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt; 3 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt; 4 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt; 5 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt;                             instance1Name         instance2Name</span>
<span class="co">#&gt; 1 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt; 2 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt; 3 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt; 4 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt; 5 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt;                        instance3Name instance4Name instance5Name instance6Name</span>
<span class="co">#&gt; 1 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt; 2 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt; 3 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt; 4 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt; 5 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt;   instance7Name instance8Name instance9Name instance10Name instance11Name</span>
<span class="co">#&gt; 1                                                                        </span>
<span class="co">#&gt; 2                                                                        </span>
<span class="co">#&gt; 3                                                                        </span>
<span class="co">#&gt; 4                                                                        </span>
<span class="co">#&gt; 5                                                                        </span>
<span class="co">#&gt;   instance12Name instance13Name instance14Name instance15Name instance16Name</span>
<span class="co">#&gt; 1                                                                           </span>
<span class="co">#&gt; 2                                                                           </span>
<span class="co">#&gt; 3                                                                           </span>
<span class="co">#&gt; 4                                                                           </span>
<span class="co">#&gt; 5                                                                           </span>
<span class="co">#&gt;   bucket300 bucket500 bucket1000 bucket2500 bucket5000 bucket10000</span>
<span class="co">#&gt; 1     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt; 2     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt; 3     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt; 4     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt; 5     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt;   orderPhenotype checked</span>
<span class="co">#&gt; 1             40       1</span>
<span class="co">#&gt; 2             40       1</span>
<span class="co">#&gt; 3             42       1</span>
<span class="co">#&gt; 4             47       1</span>
<span class="co">#&gt; 5             47       1</span></pre></div>
<p>Lets choose one filter from above table</p>
<div class="sourceCode" id="cb16"><pre class="downlit">
<span class="co"># apply this first row filter</span>
<span class="va">my_phenotypic_filter</span> <span class="op">&lt;-</span> <span class="va">all_filters</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>
<span class="va">my_phenotypic_filter</span>
<span class="co">#&gt;             categoryPathLevel1 categoryPathLevel2         categoryPathLevel3</span>
<span class="co">#&gt; 1 UK Biobank Assessment Centre        Touchscreen Health and medical history</span>
<span class="co">#&gt;   categoryPathLevel4   id                            name type</span>
<span class="co">#&gt; 1   Cancer screening 2345 Ever had bowel cancer screening bars</span>
<span class="co">#&gt;            valueType units instances array</span>
<span class="co">#&gt; 1 Categorical single               4     1</span>
<span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          description</span>
<span class="co">#&gt; 1 "ACE touchscreen question ""Have you ever had a screening test for bowel (colorectal) cancer? (Please include tests for blood in the stool/faeces or a colonoscopy or a sigmoidoscopy)"" If the participant activated the Help button they were shown the message:     Screening tests for bowel or colorectal cancer include:  - FOBT (faecal occult blood test) - this is when you    are given a set of cards and asked to smear a part    of your stool on three separate occasions onto the    cards and then return the cards to be tested for    blood.  - Sigmoidoscopy - a tube is used to examine the lower    bowel. This is usually done in a doctor's office    without pain relief.  - Colonoscopy - a long tube is used the examine the    whole large bowel; you would usually have to drink    a large amount of special liquid to prepare the    bowel; and you would be given a sedative medication    for the procedure.     "</span>
<span class="co">#&gt;   descriptionParticipantsNo descriptionItemNo descriptionStability coding</span>
<span class="co">#&gt; 1                    501599            572225             Complete 100349</span>
<span class="co">#&gt;   descriptionCategoryID descriptionItemType descriptionStrata descriptionSexed</span>
<span class="co">#&gt; 1                100040                Data           Primary           Unisex</span>
<span class="co">#&gt;                                                      link</span>
<span class="co">#&gt; 1 http://biobank.ctsu.ox.ac.uk/showcase/field.cgi?id=2345</span>
<span class="co">#&gt;                                                                                 instance0Name</span>
<span class="co">#&gt; 1 Initial assessment visit (2006-2010) at which participants were recruited and consent given</span>
<span class="co">#&gt;                             instance1Name         instance2Name</span>
<span class="co">#&gt; 1 First repeat assessment visit (2012-13) Imaging visit (2014+)</span>
<span class="co">#&gt;                        instance3Name instance4Name instance5Name instance6Name</span>
<span class="co">#&gt; 1 First repeat imaging visit (2019+)                                          </span>
<span class="co">#&gt;   instance7Name instance8Name instance9Name instance10Name instance11Name</span>
<span class="co">#&gt; 1                                                                        </span>
<span class="co">#&gt;   instance12Name instance13Name instance14Name instance15Name instance16Name</span>
<span class="co">#&gt; 1                                                                           </span>
<span class="co">#&gt;   bucket300 bucket500 bucket1000 bucket2500 bucket5000 bucket10000</span>
<span class="co">#&gt; 1     FALSE     FALSE      FALSE      FALSE      FALSE       FALSE</span>
<span class="co">#&gt;   orderPhenotype checked</span>
<span class="co">#&gt; 1             40       1</span></pre></div>
</div>
<div id="apply-phenotypic-filter" class="section level4">
<h4 class="hasAnchor">
<a href="#apply-phenotypic-filter" class="anchor"></a>Apply phenotypic filter</h4>
<p>We can get statistic of sample numbers in a cohort for which a filter is applied.</p>
<div class="sourceCode" id="cb17"><pre class="downlit">
<span class="co"># phenotype filter</span>
<span class="va">cohort_with_filters</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_get_filter_statistics.html">cb_get_filter_statistics</a></span><span class="op">(</span><span class="va">my_cloudos</span>, 
                                     cohort <span class="op">=</span> <span class="va">my_cohort</span>, 
                                     filter_id <span class="op">=</span> <span class="va">my_phenotypic_filter</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
<span class="va">cohort_with_filters</span>
<span class="co">#&gt; # A tibble: 4 x 4</span>
<span class="co">#&gt;   `_id` number  total label               </span>
<span class="co">#&gt;   &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;               </span>
<span class="co">#&gt; 1    -3  32545 600000 Prefer not to answer</span>
<span class="co">#&gt; 2    -1 181143 600000 Do not know         </span>
<span class="co">#&gt; 3     0 300719 600000 No                  </span>
<span class="co">#&gt; 4     1  85593 600000 Yes</span></pre></div>
<p>We can get number of total participants after applying a filter.</p>
<div class="sourceCode" id="cb18"><pre class="downlit">
<span class="co"># filter participants</span>
<span class="va">total_participants_with_filter</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">:::</span><span class="fu"><a href="reference/cb_filter_participants.html">cb_filter_participants</a></span><span class="op">(</span><span class="va">my_cloudos</span>,
                                                cohort <span class="op">=</span> <span class="va">my_cohort</span>, 
                                                filter_id <span class="op">=</span> <span class="va">my_phenotypic_filter</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
 
<span class="va">total_participants_with_filter</span>
<span class="co">#&gt; $total</span>
<span class="co">#&gt; [1] 644686</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] 333264</span></pre></div>
</div>
<div id="save-a-filter" class="section level4">
<h4 class="hasAnchor">
<a href="#save-a-filter" class="anchor"></a>Save a filter</h4>
<p>Save a filter into the database.</p>
<div class="sourceCode" id="cb19"><pre class="downlit">
<span class="co"># apply filter (cb_genotypic_save) </span>
<span class="va">gs</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_genotypic_save.html">cb_genotypic_save</a></span><span class="op">(</span><span class="va">my_cloudos</span>,
                                 cohort <span class="op">=</span> <span class="va">my_cohort</span>,
                                 filter_id <span class="op">=</span> <span class="va">my_phenotypic_filter</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>

<span class="va">gs</span>
<span class="co">#&gt;      cohortId                   markers filters _id                       </span>
<span class="co">#&gt; data "5f6228133097cc7a6504fb76" List,0  List,1  "5f74b3dd79721e542d5beaab"</span>
<span class="co">#&gt;      numberOfParticipants</span>
<span class="co">#&gt; data 32545</span></pre></div>
</div>
</div>
<div id="additional-for-ui" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-for-ui" class="anchor"></a>Additional for UI</h3>
<div id="get-samples-table-for-selected-rows" class="section level4">
<h4 class="hasAnchor">
<a href="#get-samples-table-for-selected-rows" class="anchor"></a>Get samples table for selected rows</h4>
<p>Create a RAW data string. This usually generates after selecting participants on UI. (more information will be added how to create this in R)</p>
<p>NOTE: This function will be improved <code>raw_data</code> arg is temporary.</p>
<div class="sourceCode" id="cb20"><pre class="downlit">
<span class="va">new_raw_data</span> <span class="op">&lt;-</span> <span class="st">'{"columns":[{"id":34,"instance":0,"array":{"type":"exact","value":0}},{"id":31,"instance":0,"array":{"type":"exact","value":0}},{"id":52,"instance":0,"array":{"type":"exact","value":0}},{"id":5984,"instance":0,"array":{"type":"avg"}},{"id":5984,"instance":0,"array":{"type":"min"}},{"id":5984,"instance":0,"array":{"type":"max"}},{"id":20001,"instance":0,"array":{"type":"exact","value":0}}],"ids":["5f185b92bf92ed4d3be9637d","5edbdd689d700db709af0c2f","5f185b91bf92ed4d3be9587e","5f185b91bf92ed4d3be95984","5edbdd689d700db709af0c3e","5edbdd689d700db709af0c2b","5edbdd689d700db709af0c2d","5f185b93bf92ed4d3be982e9","5edbdd689d700db709af0c2a","5edbdd689d700db709af0c4d"],"type":"csv","base_url":"http://cohort-browser-766010452.eu-west-1.elb.amazonaws.com"}'</span></pre></div>
<p>Using this above raw data lets extract selected participants.</p>
<div class="sourceCode" id="cb21"><pre class="downlit">
<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">cloudos</span><span class="fu">::</span><span class="fu"><a href="reference/cb_extract_samples.html">cb_extract_samples</a></span><span class="op">(</span><span class="va">my_cloudos</span>,
                      raw_data <span class="op">=</span> <span class="va">new_raw_data</span><span class="op">)</span>
<span class="va">df</span>
<span class="co">#&gt;          i Year_of_birth    Sex Month_of_birth ECG._load.0.avg ECG._load.0.min</span>
<span class="co">#&gt; 1  1000002            NA                                    NA              NA</span>
<span class="co">#&gt; 2  1000016          1954   Male      September        66.88393               2</span>
<span class="co">#&gt; 3  1000020            NA                                    NA              NA</span>
<span class="co">#&gt; 4  1000035            NA                                    NA              NA</span>
<span class="co">#&gt; 5  1000048          1950 Female        January        59.76106               2</span>
<span class="co">#&gt; 6  1000057          1942 Female       February        74.44643               3</span>
<span class="co">#&gt; 7  1000059          1964 Female       December        71.14912               1</span>
<span class="co">#&gt; 8  1000061            NA                                    NA              NA</span>
<span class="co">#&gt; 9  1000063          1944 Female          April        66.19643               2</span>
<span class="co">#&gt; 10 1000068          1947 Female       November        65.12500               1</span>
<span class="co">#&gt;    ECG._load.0.max      Cancer_code._self.reported.0.0</span>
<span class="co">#&gt; 1               NA                                    </span>
<span class="co">#&gt; 2              270                     cervical cancer</span>
<span class="co">#&gt; 3               NA                                    </span>
<span class="co">#&gt; 4               NA                                    </span>
<span class="co">#&gt; 5              195                     chronic myeloid</span>
<span class="co">#&gt; 6              270 metastatic cancer (unknown primary)</span>
<span class="co">#&gt; 7              270          uterine/endometrial cancer</span>
<span class="co">#&gt; 8               NA                                    </span>
<span class="co">#&gt; 9              270                     chronic myeloid</span>
<span class="co">#&gt; 10             195                      bladder cancer</span></pre></div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/lifebit-ai/cloudos/">https://​github.com/​lifebit-ai/​cloudos/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/lifebit-ai/cloudos/issues">https://​github.com/​lifebit-ai/​cloudos/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Lifebit Biotech <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://github.com/lifebit-ai/cloudos/actions"><img src="https://github.com/lifebit-ai/cloudos/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Lifebit Biotech.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
