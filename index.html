<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Client Library for CloudOS • cloudos</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="R Client Library for CloudOS">
<meta property="og:description" content="The CloudOS client library for R makes it easy to interact with 
    CloudOS &lt;https://cloudos.lifebit.ai/&gt; in the R environment for analysis.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cloudos</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/lifebit-ai/cloudos/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="cloudos-">cloudos <img src="reference/figures/logo/hexlogo.png" align="right" height="140/"><a class="anchor" aria-label="anchor" href="#cloudos-"></a>
</h1></div>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<!-- badges: start -->

<p><strong>cloudos</strong> R package makes it easy to interact with Lifebit’s CloudOS <a href="https://cloudos.lifebit.ai/" class="external-link uri">https://cloudos.lifebit.ai/</a> platform in an R environment.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the latest release of <strong>cloudos</strong> from:</p>
<ul>
<li>
<a href="https://cran.r-project.org/package=cloudos" class="external-link">CRAN</a>:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cloudos"</span><span class="op">)</span></code></pre></div>
<ul>
<li>
<a href="https://anaconda.org/conda-forge/r-cloudos" class="external-link">conda-forge</a>:</li>
</ul>
<pre class="shell"><code> conda install -c conda-forge r-cloudos</code></pre>
<ul>
<li>
<a href="https://github.com/lifebit-ai/cloudos/" class="external-link">GitHub</a>:</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://remotes.r-lib.org" class="external-link">remotes</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span> <span class="op">}</span>
  <span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"lifebit-ai/cloudos"</span><span class="op">)</span></code></pre></div>
<p>Alternatively, you can install the latest development version of <strong>cloudos</strong>:</p>
<pre class="shell"><code>git clone https://github.com/lifebit-ai/cloudos
cd cloudos
git checkout origin/devel
Rscript -e 'devtools::install(".")'</code></pre>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Below is a demonstration of how the <strong>cloudos</strong> package can be used.</p>
<div class="section level3">
<h3 id="load-the-library">Load the library<a class="anchor" aria-label="anchor" href="#load-the-library"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifebit-ai/cloudos" class="external-link">cloudos</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Welcome to Lifebit's CloudOS R client </span>
<span class="co">#&gt; For Documentation visit - https://lifebit-ai.github.io/cloudos/ </span>
<span class="co">#&gt; This package is under activate development. If you found any issues, </span>
<span class="co">#&gt; Please reach out here - https://github.com/lifebit-ai/cloudos/issues</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span> <span class="co"># For better visualization of wide dataframes in this README examples</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># For pipe</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="configure-cloudos">Configure CloudOS<a class="anchor" aria-label="anchor" href="#configure-cloudos"></a>
</h3>
<p>This package is primarily a means of communicating with a CloudOS instance using it’s API. Before it can communicate with the CloudOS instance, the package must be configured with some key information: - The CloudOS base URL. This is the URL in your browser when you navigate to the Cohort Browser in CloudOS. Often of the form <code>https://my_instance.lifebit.ai/app/cohort-browser</code>. - The CloudOS token. Navigate to settings page in CloudOS to generate an API key you can use as your token (see image below). - The CloudOS team ID. Also found in the settings page in CloudOS labelled as the “Workspace ID” (see image below).</p>
<div class="figure">
<img src="reference/figures/settings_page.png" alt=""><p class="caption">CloudOS settings page</p>
</div>
<p>The package will look for this information in the following locations in this order:</p>
<ol style="list-style-type: decimal">
<li>From environment variables <code>CLOUDOS_BASEURL</code>, <code>CLOUDOS_TOKEN</code>, and <code>CLOUDOS_TEAMID</code>.</li>
<li>From a cloudos configuration file.</li>
</ol>
<p>There are three ways to configure the package:</p>
<ol style="list-style-type: decimal">
<li>Add them to <code>~/.Renviron</code> in the following way, which will load the environment variables on beginning of the R-session</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">CLOUDOS_BASEURL</span><span class="op">=</span><span class="st">"xxx"</span>
<span class="va">CLOUDOS_TOKEN</span><span class="op">=</span><span class="st">"xxx"</span>
<span class="va">CLOUDOS_TEAMID</span><span class="op">=</span><span class="st">"xxx"</span></code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Add them during an R session using <code>Sys.setenv(ENV_VAR = "env_var_value")</code>
</li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>CLOUDOS_BASEURL <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>CLOUDOS_TOKEN <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>CLOUDOS_TEAMID <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Use the function <code><a href="reference/cloudos_configure.html">cloudos_configure()</a></code>, which will create a <code>~/.cloudos/config</code> that will persist between R sessions and be read from each time (Recommended way if you are using multiple cloudos clients).</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/cloudos_configure.html">cloudos_configure</a></span><span class="op">(</span>base_url <span class="op">=</span> <span class="st">"xxx"</span>,
                  token <span class="op">=</span> <span class="st">"xxx"</span>,
                  team_id <span class="op">=</span> <span class="st">"xxx"</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="application---cohort-browser">Application - Cohort Browser<a class="anchor" aria-label="anchor" href="#application---cohort-browser"></a>
</h2>
<p><strong>Below information is out of date, please refer to the <a href="https://lifebit-ai.github.io/cloudos/reference/index.html">latest function docs</a></strong>.</p>
<p>Cohort Browser is part of Lifebit’s CloudOS offering. Let’s explore how to interact with this in R environment.</p>
<div class="section level3">
<h3 id="list-cohorts">List Cohorts<a class="anchor" aria-label="anchor" href="#list-cohorts"></a>
</h3>
<p>To check list of available cohorts in a workspace.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_list_cohorts.html">cb_list_cohorts</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; Total number of cohorts found: 3. Showing 10 by default. Change 'size' parameter to return more.</span>
<span class="va">cohorts</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="6%">
<col width="27%">
<col width="13%">
<col width="11%">
<col width="13%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">name</th>
<th align="left">description</th>
<th align="right">number_of_participants</th>
<th align="right">number_of_filters</th>
<th align="left">created_at</th>
<th align="left">updated_at</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">610d3004597aa12e251abdf2</td>
<td align="left">cohort-hms</td>
<td align="left">This cohort is for testing purpose, created from R.</td>
<td align="right">20778</td>
<td align="right">0</td>
<td align="left">2021-08-06T12:50:12.242Z</td>
<td align="left">2021-08-06T13:25:00.192Z</td>
</tr>
<tr class="even">
<td align="left">610ac00edb7c7a1d9d0c309f</td>
<td align="left">il_test01</td>
<td align="left">NA</td>
<td align="right">415</td>
<td align="right">2</td>
<td align="left">2021-08-04T16:27:58.708Z</td>
<td align="left">2021-08-04T16:30:06.253Z</td>
</tr>
<tr class="odd">
<td align="left">60feab0767a6666b8bf9e11b</td>
<td align="left">Manos Test</td>
<td align="left">NA</td>
<td align="right">530</td>
<td align="right">0</td>
<td align="left">2021-07-26T12:31:03.458Z</td>
<td align="left">2021-08-04T13:02:46.731Z</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="create-a-cohort">Create a cohort<a class="anchor" aria-label="anchor" href="#create-a-cohort"></a>
</h3>
<p>To create a new cohort.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_create_cohort.html">cb_create_cohort</a></span><span class="op">(</span>cohort_name <span class="op">=</span> <span class="st">"Cohort-R"</span>,
                             cohort_desc <span class="op">=</span> <span class="st">"This cohort is for testing purpose, created from R."</span><span class="op">)</span>
<span class="co">#&gt; Cohort created successfully.</span>
<span class="va">my_cohort</span>
<span class="co">#&gt; Cohort ID:  610d47d7597aa12e251abdf4 </span>
<span class="co">#&gt; Cohort Name:  Cohort-R </span>
<span class="co">#&gt; Cohort Description:  This cohort is for testing purpose, created from R. </span>
<span class="co">#&gt; Number of phenotypes in query:  1 </span>
<span class="co">#&gt; Cohort Browser version:  v2</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="get-a-cohort">Get a cohort<a class="anchor" aria-label="anchor" href="#get-a-cohort"></a>
</h3>
<p>Get a available cohort in to a cohort R object. This cohort object can be used in many different other functions.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">other_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_load_cohort.html">cb_load_cohort</a></span><span class="op">(</span>cohort_id <span class="op">=</span> <span class="st">"610ac00edb7c7a1d9d0c309f"</span><span class="op">)</span>
<span class="va">other_cohort</span>
<span class="co">#&gt; Cohort ID:  610ac00edb7c7a1d9d0c309f </span>
<span class="co">#&gt; Cohort Name:  il_test01 </span>
<span class="co">#&gt; Cohort Description:   </span>
<span class="co">#&gt; Number of phenotypes in query:  2 </span>
<span class="co">#&gt; Cohort Browser version:  v2</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="explore-available-phenotypes">Explore available phenotypes<a class="anchor" aria-label="anchor" href="#explore-available-phenotypes"></a>
</h3>
<div class="section level4">
<h4 id="search-phenotypes">Search phenotypes<a class="anchor" aria-label="anchor" href="#search-phenotypes"></a>
</h4>
<p>Search for phenotypes based on a term. Searching with <code>term = ""</code> will return all the available phenotypes.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">disease_phenotypes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_search_phenotypes.html">cb_search_phenotypes</a></span><span class="op">(</span>term <span class="op">=</span> <span class="st">"disease"</span><span class="op">)</span>
<span class="co">#&gt; Total number of phenotypic filters found - 18</span>
<span class="va">disease_phenotypes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="0%">
<col width="3%">
<col width="21%">
<col width="0%">
<col width="1%">
<col width="2%">
<col width="0%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="0%">
<col width="3%">
<col width="7%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="left">description</th>
<th align="right">array</th>
<th align="left">type</th>
<th align="left">valueType</th>
<th align="left">units</th>
<th align="left">bucket500</th>
<th align="left">bucket1000</th>
<th align="left">bucket2500</th>
<th align="left">bucket5000</th>
<th align="left">bucket300</th>
<th align="left">bucket10000</th>
<th align="left">categoryPathLevel1</th>
<th align="left">categoryPathLevel2</th>
<th align="right">instances</th>
<th align="left">Sorting</th>
<th align="left">coding</th>
<th align="left">descriptionParticipantsNo</th>
<th align="left">link</th>
<th align="left">descriptionStability</th>
<th align="left">descriptionCategoryID</th>
<th align="left">descriptionItemType</th>
<th align="left">descriptionStrata</th>
<th align="left">descriptionSexed</th>
<th align="left">orderPhenotype</th>
<th align="left">instance0Name</th>
<th align="left">instance1Name</th>
<th align="left">instance2Name</th>
<th align="left">instance3Name</th>
<th align="left">instance4Name</th>
<th align="left">instance5Name</th>
<th align="left">instance6Name</th>
<th align="left">instance7Name</th>
<th align="left">instance8Name</th>
<th align="left">instance9Name</th>
<th align="left">instance10Name</th>
<th align="left">instance11Name</th>
<th align="left">instance12Name</th>
<th align="left">instance13Name</th>
<th align="left">instance14Name</th>
<th align="left">instance15Name</th>
<th align="left">instance16Name</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">28</td>
<td align="left">Rare diseases family sk</td>
<td align="left">Database identifier for a rare disease family</td>
<td align="right">1</td>
<td align="left">text_search</td>
<td align="left">Text</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Basic characteristics</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">89132</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">29</td>
<td align="left">Rare diseases family id</td>
<td align="left">A locally-allocated family identifier assigned to the proband and their relatives. This should be unique to this duo or trio within the GMC and is necessary for linking related participants.</td>
<td align="right">1</td>
<td align="left">text_search</td>
<td align="left">Text</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Basic characteristics</td>
<td align="left">NA</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">89132</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">177</td>
<td align="left">Cancer disease sub type (HPO)</td>
<td align="left">The subtype of the cancer in question, recorded against a limited set of supplied enumerations. </td>
<td align="right">4</td>
<td align="left">bars</td>
<td align="left">Categorical multiple</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Cancer</td>
<td align="left">Participant disease</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">17404</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="right">178</td>
<td align="left">Cancer disease type</td>
<td align="left">The cancer type of the tumour sample submitted to Genomics England.</td>
<td align="right">4</td>
<td align="left">bars</td>
<td align="left">Categorical multiple</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Cancer</td>
<td align="left">Participant disease</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">17404</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="right">206</td>
<td align="left">Disease group</td>
<td align="left">Top-level classification of rare diseases (project specific)</td>
<td align="right">5</td>
<td align="left">bars</td>
<td align="left">Categorical multiple</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Rare disease</td>
<td align="left">Participant disease</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">39913</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
<p>Let’s choose a phenotype from the above table. The “id” is the most important part as it will allow us to use this phenotype for cohort queries and other functions.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the first row/phenotype in the table</span>
<span class="va">my_phenotype</span> <span class="op">&lt;-</span> <span class="va">disease_phenotypes</span><span class="op">[</span><span class="fl">5</span>,<span class="op">]</span>
<span class="va">my_phenotype</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="0%">
<col width="2%">
<col width="8%">
<col width="0%">
<col width="0%">
<col width="2%">
<col width="0%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="2%">
<col width="2%">
<col width="1%">
<col width="1%">
<col width="1%">
<col width="3%">
<col width="9%">
<col width="2%">
<col width="3%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
<col width="2%">
</colgroup>
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="left">description</th>
<th align="right">array</th>
<th align="left">type</th>
<th align="left">valueType</th>
<th align="left">units</th>
<th align="left">bucket500</th>
<th align="left">bucket1000</th>
<th align="left">bucket2500</th>
<th align="left">bucket5000</th>
<th align="left">bucket300</th>
<th align="left">bucket10000</th>
<th align="left">categoryPathLevel1</th>
<th align="left">categoryPathLevel2</th>
<th align="right">instances</th>
<th align="left">Sorting</th>
<th align="left">coding</th>
<th align="left">descriptionParticipantsNo</th>
<th align="left">link</th>
<th align="left">descriptionStability</th>
<th align="left">descriptionCategoryID</th>
<th align="left">descriptionItemType</th>
<th align="left">descriptionStrata</th>
<th align="left">descriptionSexed</th>
<th align="left">orderPhenotype</th>
<th align="left">instance0Name</th>
<th align="left">instance1Name</th>
<th align="left">instance2Name</th>
<th align="left">instance3Name</th>
<th align="left">instance4Name</th>
<th align="left">instance5Name</th>
<th align="left">instance6Name</th>
<th align="left">instance7Name</th>
<th align="left">instance8Name</th>
<th align="left">instance9Name</th>
<th align="left">instance10Name</th>
<th align="left">instance11Name</th>
<th align="left">instance12Name</th>
<th align="left">instance13Name</th>
<th align="left">instance14Name</th>
<th align="left">instance15Name</th>
<th align="left">instance16Name</th>
</tr></thead>
<tbody><tr class="odd">
<td align="right">206</td>
<td align="left">Disease group</td>
<td align="left">Top-level classification of rare diseases (project specific)</td>
<td align="right">5</td>
<td align="left">bars</td>
<td align="left">Categorical multiple</td>
<td align="left"></td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">FALSE</td>
<td align="left">Rare disease</td>
<td align="left">Participant disease</td>
<td align="right">1</td>
<td align="left"></td>
<td align="left"></td>
<td align="left">39913</td>
<td align="left"><a href="https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370" class="external-link uri">https://cnfl.extge.co.uk/pages/viewpage.action?pageId=147659370</a></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left">Main 100k Programme</td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr></tbody>
</table>
</div>
<div class="section level4">
<h4 id="get-distribution-of-cohort-participants-for-a-phenotype">Get distribution of cohort participants for a phenotype<a class="anchor" aria-label="anchor" href="#get-distribution-of-cohort-participants-for-a-phenotype"></a>
</h4>
<p>Let’s check the numbers of participants across the categories of this phenotype.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># phenotype</span>
<span class="va">my_pheno_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_get_phenotype_statistics.html">cb_get_phenotype_statistics</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, 
                                     pheno_id <span class="op">=</span> <span class="va">my_phenotype</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
<span class="va">my_pheno_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">_id</th>
<th align="right">number</th>
<th align="right">total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Metabolic disorders</td>
<td align="right">125</td>
<td align="right">5090</td>
</tr>
<tr class="even">
<td align="left">Ultra-rare disorders</td>
<td align="right">272</td>
<td align="right">5090</td>
</tr>
<tr class="odd">
<td align="left">dysmorphic and congenital abnormality syndromes</td>
<td align="right">3</td>
<td align="right">5090</td>
</tr>
<tr class="even">
<td align="left">Skeletal disorders</td>
<td align="right">109</td>
<td align="right">5090</td>
</tr>
<tr class="odd">
<td align="left">Respiratory disorders</td>
<td align="right">37</td>
<td align="right">5090</td>
</tr>
<tr class="even">
<td align="left">Endocrine disorders</td>
<td align="right">121</td>
<td align="right">5090</td>
</tr>
<tr class="odd">
<td align="left">Dermatological disorders</td>
<td align="right">68</td>
<td align="right">5090</td>
</tr>
<tr class="even">
<td align="left">Tumour syndromes</td>
<td align="right">228</td>
<td align="right">5090</td>
</tr>
<tr class="odd">
<td align="left">tumour syndromes</td>
<td align="right">3</td>
<td align="right">5090</td>
</tr>
<tr class="even">
<td align="left">Psychiatric disorders</td>
<td align="right">5</td>
<td align="right">5090</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="update-a-cohort-with-a-new-query">Update a cohort with a new query<a class="anchor" aria-label="anchor" href="#update-a-cohort-with-a-new-query"></a>
</h3>
<p>A query defines what particpants are included in a cohort based on phenotypes.</p>
<p>Phenotypes can be continuous - in which case a selected range needs to be specified, or they can be categorical - in which case selected categories need to be specified.</p>
<div class="section level4">
<h4 id="continuous-phenotype">Continuous phenotype<a class="anchor" aria-label="anchor" href="#continuous-phenotype"></a>
</h4>
<p>For phenotype “Year of birth” (with id = 8)</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># cb_get_phenotype_metadata(8)$name</span>
<span class="co"># "Year of birth"</span>
<span class="fu"><a href="reference/cb_get_phenotype_statistics.html">cb_get_phenotype_statistics</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, pheno_id <span class="op">=</span> <span class="fl">8</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">_id</th>
<th align="right">number</th>
<th align="right">total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1923</td>
<td align="right">3</td>
<td align="right">44667</td>
</tr>
<tr class="even">
<td align="right">1924</td>
<td align="right">9</td>
<td align="right">44667</td>
</tr>
<tr class="odd">
<td align="right">1925</td>
<td align="right">8</td>
<td align="right">44667</td>
</tr>
<tr class="even">
<td align="right">1926</td>
<td align="right">4</td>
<td align="right">44667</td>
</tr>
<tr class="odd">
<td align="right">1927</td>
<td align="right">16</td>
<td align="right">44667</td>
</tr>
<tr class="even">
<td align="right">1928</td>
<td align="right">36</td>
<td align="right">44667</td>
</tr>
<tr class="odd">
<td align="right">1929</td>
<td align="right">47</td>
<td align="right">44667</td>
</tr>
<tr class="even">
<td align="right">1930</td>
<td align="right">60</td>
<td align="right">44667</td>
</tr>
<tr class="odd">
<td align="right">1931</td>
<td align="right">81</td>
<td align="right">44667</td>
</tr>
<tr class="even">
<td align="right">1932</td>
<td align="right">105</td>
<td align="right">44667</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="categorical-phenotype">Categorical phenotype<a class="anchor" aria-label="anchor" href="#categorical-phenotype"></a>
</h4>
<p>For phenotype “Total full brothers” (with id = 48).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># cb_get_phenotype_metadata(48)$name</span>
<span class="co"># "Total full brothers"</span>
<span class="fu"><a href="reference/cb_get_phenotype_statistics.html">cb_get_phenotype_statistics</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, pheno_id <span class="op">=</span> <span class="fl">48</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">_id</th>
<th align="right">number</th>
<th align="right">total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">0</td>
<td align="right">4248</td>
<td align="right">13276</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">7791</td>
<td align="right">13276</td>
</tr>
<tr class="odd">
<td align="right">2</td>
<td align="right">1237</td>
<td align="right">13276</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="filtering-cohorts-using-queries">Filtering cohorts using queries<a class="anchor" aria-label="anchor" href="#filtering-cohorts-using-queries"></a>
</h4>
<p>Now let’s restrict our cohort to a set of participants based on the phenotypes we explored above.</p>
<p>A single phenotype query can be defined using the <code>phenotype</code> function.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># total full brothers: 1</span>
<span class="va">categorical_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/phenotype.html">phenotype</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">48</span>, value <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="co"># year of birth: 1965 - 1995</span>
<span class="va">continuous_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/phenotype.html">phenotype</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">8</span>, from <span class="op">=</span> <span class="fl">1965</span>, to <span class="op">=</span> <span class="fl">1995</span><span class="op">)</span></code></pre></div>
<p>To combine single phenotype queries, you can use <code>&amp;</code>, <code>|</code> and <code>!</code> operators.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">query</span> <span class="op">&lt;-</span> <span class="va">categorical_query</span> <span class="op">&amp;</span> <span class="va">continuous_query</span>
<span class="fu"><a href="reference/cb_participant_count.html">cb_participant_count</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, query <span class="op">=</span> <span class="va">query</span>, keep_query <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; $total</span>
<span class="co">#&gt; [1] 44667</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] 2524</span></code></pre></div>
<p>Any number of single phenotypes can be combined using any combination of operators. The order in which logic is resolved follows the usual rules and can be controlled using brackets.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">categorical_query_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/phenotype.html">phenotype</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">48</span>, value <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>

<span class="va">query</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">categorical_query</span> <span class="op">|</span> <span class="va">categorical_query_2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="va">continuous_query</span>
<span class="fu"><a href="reference/cb_participant_count.html">cb_participant_count</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, query <span class="op">=</span> <span class="va">query</span>, keep_query <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; $total</span>
<span class="co">#&gt; [1] 44667</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] 2883</span></code></pre></div>
<p>If we’re happy that this is a sensible query to apply, we can apply the query to the cohort, making sure to override the previous query by setting <code>keep_query</code> to <code>FALSE</code>. If we wanted to keep the criteria from the pre-exisitng query and add our new phenotype-based criteria to them we would leave <code>keep_query</code> set to the defualt value of <code>TRUE</code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># apply the query</span>
<span class="fu"><a href="reference/cb_apply_query.html">cb_apply_query</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, query <span class="op">=</span> <span class="va">query</span>, keep_query <span class="op">=</span> <span class="cn">F</span><span class="op">)</span>
<span class="co">#&gt; Query applied sucessfully.</span>

<span class="co"># update the local cohort object with info from the changed version on the server</span>
<span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_load_cohort.html">cb_load_cohort</a></span><span class="op">(</span><span class="va">my_cohort</span><span class="op">@</span><span class="va">id</span><span class="op">)</span>

<span class="co"># double check that the cohort has th number of participants we expected</span>
<span class="fu"><a href="reference/cb_participant_count.html">cb_participant_count</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span><span class="op">)</span>
<span class="co">#&gt; $total</span>
<span class="co">#&gt; [1] 44667</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] 2883</span></code></pre></div>
<p>We could now further restrict our cohort to include only females (phenotype “Participant phenotypic sex”, id = 10) by using <code>keep_query = TRUE</code>. In other words, this argument applies a query that looks like “old query AND new query”.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">new_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/phenotype.html">phenotype</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">10</span>, value <span class="op">=</span> <span class="st">"Female"</span><span class="op">)</span>
<span class="co"># apply the query</span>
<span class="fu"><a href="reference/cb_apply_query.html">cb_apply_query</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, query <span class="op">=</span> <span class="va">new_query</span>, keep_query <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; Query applied sucessfully.</span>

<span class="co"># update the local cohort object with info from the changed version on the server</span>
<span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_load_cohort.html">cb_load_cohort</a></span><span class="op">(</span><span class="va">my_cohort</span><span class="op">@</span><span class="va">id</span><span class="op">)</span>

<span class="co"># check the number of participants</span>
<span class="fu"><a href="reference/cb_participant_count.html">cb_participant_count</a></span><span class="op">(</span><span class="va">my_cohort</span><span class="op">)</span>
<span class="co">#&gt; $total</span>
<span class="co">#&gt; [1] 44667</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $count</span>
<span class="co">#&gt; [1] 1457</span></code></pre></div>
<p>Now that the query has been applied to our cohort, let’s inspect the distribution of our phenotype of interest in the cohort.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># view the distribution of disease groups in our cohort</span>
<span class="fu"><a href="reference/cb_get_phenotype_statistics.html">cb_get_phenotype_statistics</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>, pheno_id <span class="op">=</span> <span class="fl">206</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">_id</th>
<th align="right">number</th>
<th align="right">total</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Hearing and ear disorders</td>
<td align="right">33</td>
<td align="right">1731</td>
</tr>
<tr class="even">
<td align="left">Growth disorders</td>
<td align="right">14</td>
<td align="right">1731</td>
</tr>
<tr class="odd">
<td align="left">Endocrine disorders</td>
<td align="right">34</td>
<td align="right">1731</td>
</tr>
<tr class="even">
<td align="left">Dermatological disorders</td>
<td align="right">31</td>
<td align="right">1731</td>
</tr>
<tr class="odd">
<td align="left">Respiratory disorders</td>
<td align="right">8</td>
<td align="right">1731</td>
</tr>
<tr class="even">
<td align="left">dysmorphic and congenital abnormality syndromes</td>
<td align="right">2</td>
<td align="right">1731</td>
</tr>
<tr class="odd">
<td align="left">Skeletal disorders</td>
<td align="right">37</td>
<td align="right">1731</td>
</tr>
<tr class="even">
<td align="left">Ophthalmological disorders</td>
<td align="right">148</td>
<td align="right">1731</td>
</tr>
<tr class="odd">
<td align="left">neurology and neurodevelopmental disorders</td>
<td align="right">4</td>
<td align="right">1731</td>
</tr>
<tr class="even">
<td align="left">Tumour syndromes</td>
<td align="right">76</td>
<td align="right">1731</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="retreive-the-participant-table">Retreive the participant table<a class="anchor" aria-label="anchor" href="#retreive-the-participant-table"></a>
</h3>
<p>Now lets get a participant phenotype table with the columns of interest for our cohort.</p>
<p>First we have to update the cohort on the cohort browser server to set what columns will be in the table. Currently the best way to do this is to use (counterintuitively) <code>cb_apply_query</code> to add the IDs of the phenotypes of interest as columns.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/cb_apply_query.html">cb_apply_query</a></span><span class="op">(</span><span class="va">my_cohort</span>, column_ids <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">208</span>, <span class="fl">10</span>, <span class="fl">8</span>, <span class="fl">48</span><span class="op">)</span>, keep_columns <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>
<span class="co">#&gt; Query applied sucessfully.</span>
<span class="va">my_cohort</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_load_cohort.html">cb_load_cohort</a></span><span class="op">(</span><span class="va">my_cohort</span><span class="op">@</span><span class="va">id</span><span class="op">)</span></code></pre></div>
<p>Now we can fetch the participant phenotype table which includes these columns.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pheno_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_get_participants_table.html">cb_get_participants_table</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span>,
                                      page_size <span class="op">=</span> <span class="fu"><a href="reference/cb_participant_count.html">cb_participant_count</a></span><span class="op">(</span><span class="va">my_cohort</span><span class="op">)</span><span class="op">$</span><span class="va">count</span><span class="op">)</span>

<span class="va">pheno_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="4%">
<col width="6%">
<col width="12%">
<col width="6%">
<col width="15%">
<col width="12%">
<col width="8%">
<col width="11%">
<col width="12%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">EID</th>
<th align="left">Programme</th>
<th align="left">Handling gmc</th>
<th align="left">Year of birth</th>
<th align="left">Participant ethnic category</th>
<th align="left">Participant karyotypic sex</th>
<th align="left">Participant type</th>
<th align="left">Specific disease</th>
<th align="left">Participant phenotypic sex</th>
<th align="left">Total full brothers</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1000020</td>
<td align="left">Rare Diseases</td>
<td align="left">North Thames</td>
<td align="left">1970</td>
<td align="left">Not Stated</td>
<td align="left">Unknown</td>
<td align="left">Relative</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1000397</td>
<td align="left">Rare Diseases</td>
<td align="left">North Thames</td>
<td align="left">1999</td>
<td align="left">Mixed: White and Asian</td>
<td align="left">Not Supplied</td>
<td align="left">Proband</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="left">1000411</td>
<td align="left">Cancer</td>
<td align="left">Yorkshire and Humber</td>
<td align="left">1966</td>
<td align="left">White: British</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1000673</td>
<td align="left">Rare Diseases</td>
<td align="left">Genomics Network Alliance</td>
<td align="left">2012</td>
<td align="left">Asian or Asian British: Pakistani</td>
<td align="left">Not Supplied</td>
<td align="left">Proband</td>
<td align="left">Osteogenesis imperfecta</td>
<td align="left">Female</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">1001010</td>
<td align="left">Rare Diseases</td>
<td align="left">West Midlands</td>
<td align="left">1970</td>
<td align="left">White: British</td>
<td align="left">Not Supplied</td>
<td align="left">Proband</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">0</td>
</tr>
<tr class="even">
<td align="left">1001033</td>
<td align="left">Rare Diseases</td>
<td align="left">North East and Cumbria</td>
<td align="left">1986</td>
<td align="left">Not Stated</td>
<td align="left">Not Supplied</td>
<td align="left">Proband</td>
<td align="left">Intellectual disability</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">1001429</td>
<td align="left">Rare Diseases</td>
<td align="left">West Midlands</td>
<td align="left">1981</td>
<td align="left">White: British</td>
<td align="left">Not Supplied</td>
<td align="left">Relative</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1001667</td>
<td align="left">Rare Diseases</td>
<td align="left">Genomics Network Alliance</td>
<td align="left">1986</td>
<td align="left">White: British</td>
<td align="left">Not Supplied</td>
<td align="left">Relative</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">1001712</td>
<td align="left">Rare Diseases</td>
<td align="left">Genomics Network Alliance</td>
<td align="left">1983</td>
<td align="left">White: British</td>
<td align="left">Not Supplied</td>
<td align="left">Relative</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">1001749</td>
<td align="left">Cancer</td>
<td align="left">West London</td>
<td align="left">1965</td>
<td align="left">Not Known</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">Female</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="get-genotypic-table">Get genotypic table<a class="anchor" aria-label="anchor" href="#get-genotypic-table"></a>
</h3>
<p>Get the genotypic table for a cohort (currently only cohort browser version 1 is supported).</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cohort_genotype</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cb_get_genotypic_table.html">cb_get_genotypic_table</a></span><span class="op">(</span>cohort <span class="op">=</span> <span class="va">my_cohort</span><span class="op">)</span>
<span class="va">cohort_genotype</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="additional-notes">Additional notes<a class="anchor" aria-label="anchor" href="#additional-notes"></a>
</h2>
<p>This package is under activate development. If you find any issues, please reach out here - <a href="https://github.com/lifebit-ai/cloudos/issues" class="external-link uri">https://github.com/lifebit-ai/cloudos/issues</a></p>
<p>For documentation visit - <a href="https://lifebit-ai.github.io/cloudos/" class="uri">https://lifebit-ai.github.io/cloudos/</a></p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © <a href="https://lifebit.ai/" class="external-link">Lifebit</a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=cloudos" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/lifebit-ai/cloudos/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lifebit-ai/cloudos/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cloudos</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Sangram Keshari Sahu <br><small class="roles"> Author, maintainer </small>  </li>
<li>Ilya Levantis <br><small class="roles"> Author </small>  </li>
<li>Henry Stewart <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-green.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/lifebit-ai/cloudos/actions" class="external-link"><img src="https://github.com/lifebit-ai/cloudos/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Sangram Keshari Sahu, Ilya Levantis, Henry Stewart.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
